<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <title>Image Classfication</title>
</head>
<style>

</style>
<body>
     <!-- Image and text -->
    <nav class="navbar navbar-dark bg-dark">
        <div class="navbar-brand" href="#">Satellite Imagery Classification Tutorial 4</div>
    </nav>

    <section class='title'>
    <div class="container mt-3">
        <p> <strong class="text-primary">Congradulation!</strong> 
            You are going to finish the tutorial. Image classification is a common satellite imagery analysis. Satellite imagery records enormous information on the ground, however, to utilize the ground information, we need to transform it to vector format for bounding attribute information such as type of land, owner of the land, area, perimeter.  In the past time, people need to manually identify the parcel on the imagery and then digitalize it. It takes a lot of time to process the data,  so the scientists integrate the use of statistics to mitigate human resource in this transformation process. In the previous tutorial, we mentioned each object in the imagery has different spectral characteristics. By identifying the spectral pattern in the satellite imagery, we can generate classes and transform them into the vector format. Look at the example in the figure. It is a scatter plot of red and infrared spectral for each land cover. Each class shows the cluster in the scatter plot. The statistics utilize this characteristic to cluster the spectral and come up with the land cover classification. 
        </p>
        <div class="text-center">
            <img src="featurespace.PNG" class="rounded" style='max-width:30%; height:auto;' alt="Land cover and spectral scatter plot">
            <p class="text-secondary"><small>Fig 1. Land cover and spectral scatter plot</small></p>
        </div>
        <p>
            The workflow of image classification describes in the figure below. Firstly, extracting the training dataset by supervised or unsupervised approaches. The trained dataset is the answer for the machine, then it assigns pixels into classifications based on spectral similarity.
        </p>
        <div class="text-center">
            <img src="workflow.PNG" class="rounded" style='max-width:60%; height:auto;' alt="Land cover and spectral scatter plot">
            <p class="text-secondary"><small>Fig 2. Classification workflow</small></p>
        </div>
            In this turtorial, we will deliver:
            <ul>
                <li><a href="#concept">Common classification approach</a></li>
                <li><a href="#process"> Process your raster data</a> </li>
                <li><a href="#practice">Practice of image classification</a> </li>
            </ul>     
    </div>
    </section>
    <section id="concept">
        <div class="container mt-3">
        <h5> <strong>Common Classification Approaches</strong> </h5>
        <h6 class="mt-3">Unsupervised Classification </h6>
        <p>In unsupervised classification, it groups pixel based on their specturm signiture value, and come out with multiple clusters which refer to a type of land cover. The common method includes:</p>
        <ul>
            <li>K-means</li>
            <li>ISOData</li>
        </ul>
        <h6 class="mt-5">Supervised Classification </h6>
        <p></p>
        <div class='row mt-3'>
            <div class='col-md-4'>Minimum Distance 
                <div class="text-left">
                    <img src="minimum_distance.PNG" class="rounded" style='max-width:60%; height:auto;' alt="Land cover and spectral scatter plot">
                </div>
            </div>
            <div class='col-md-8'>The minimum distance calculates the difference between a pixel and trained sets, then assigns the pixel to the classification with the smallest difference. 
                However, it doesn't consider the distribution of an object and result some absurd classification result.
                
            </div>
        </div>
        <div class='row mt-3'>
            <div class='col-md-4'>Maximum Likelihood Classification
                <div class="text-left">
                    <img src="maximum_likelihood.PNG" class="rounded" style='max-width:60%; height:auto;' alt="Land cover and spectral scatter plot">
                </div>
            </div>
            <div class='col-md-8'>The maximum likelihood classification assume the spectral is a normal distribution, so it takes the mean value and the standard deviation from trained sets and generate a prosibility distribution. The pixel will be assigned to the classification with most similar spectral distribution. 
            </div>
        </div>

        </div>
    </section>
    <section id='process'>
<div class="container mt-5">
        <h5> <strong>Process your raster data</strong> </h5>
        <p>
            Loading the raster image to QGIS, and click on the raster in the left.
            <br> <img src="img/1.png" alt="" class="my-2" style="max-width:70%; height:auto;">
        </p>
        <p>Then click on the brows data where your raster data set is. Add your data
            <br><img src="img/2.png" alt=""style="max-width:70%; height:auto;">
        </p>
        <p>After adding the data, we need to make a composite of all the bands. We have 12 bands in this imagery but for our purpose we need only 3 bands that are: Red, Green and Blue. Information about the bands of the imagery can be found in the meta data as well as on the website of the satellite imagery which we have downloaded. 
            We will use Build Virtual Raster tool to create a band composite. The reason for making band composite is that we need to clip or extract our area of interest from the whole imagery. So, for that purpose we need a single imagery which has the required bands in it, instead of single imagery of each band.             
            <br><img src="img/3.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>In the input of Build Virtual Raster, we will put all the bands which we need such as RGB
            <br><img src="img/4.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>Then give the output path and run the tool. The result can be seen below
            <br><img src="img/5.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>As you see in the imagery in not representing the true colour of the objects such as vegetation, forest, building etc. Therefore, we need to change display of image to true colour by arranging its bands. Right click on the raster layer, go to properties and click on the symbology to see its band combination.
            <br><img src="img/6.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>In this screenshot you can see the band combination. Originally it was 1, 2 and 3. 
            <br><img src="img/7.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>Now we have change it into 3, 2 and 1, that means Red Green and Blue (RGB). The reason to do so is to see the true colour of the objects in the imagery in order to easily identify during creating sample point or polygons. Before that it was in false colour, which make it hard to identify the objects in the image. For this purpose, we need a true colour to choose the right class during creating sample points/polygon.  
            <br><img src="img/8.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>Now we have to extract out study area. Because the image is too large for this tutorial, therefore we will just extract some of its part for your understanding. You can extract your area of interest from any satellite imagery using the same method. 
            For extraction we will use Clip Raster by Extent tool
            <br><img src="img/9.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>
            Input layer will be the original raster imagery while the input clipping layer we will draw it by our self as we don’t have shapefile for this area so we will create our own just by drawing it
            <br><img src="img/10.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>After clicking on the Draw on Canvas we have draw area of our choice in a rectangular form just by clicking on the imagery from one side. It creates coordinates as can be seen in the image below in the clipping extract section
            We Can select a shapefile of the area of interest too but in this case, we don’t have a shapefile therefore we are using this method. You can create your own shapefile too using digitization tools in QGIS.            
            <br><img src="img/11.png" alt="" style="max-width:70%; height:auto;">
        </p>
        <p>After running the tool, the selected area or our area of interest has been extracted. 
            <br><img src="img/12.png" alt="" style="max-width:70%; height:auto;"></p>       
        </div>
    </section>
    <section id="practice">     
        <div class="container mt-5">
        <h5> <strong>Practice of Image Classification</strong> </h5>
        
       <ol>
           <li><h6>Create the Training Input file</h6>
            <p> Download the data from Sceibo, then open the QGIS and the Semi-Automatic Classification plug-in, and then you will see the tool bar and the control dock of SCP.</p>
            <img src="SCP.PNG" alt="SCP plug-in" style='max-width:50%; height:auto;'> 
            <br><small class="text-secondary">Fig 3. SCP toolbar and dock window</small>
            <br>
            Load your raster by clicking the button <img src="SCP_window.PNG" alt="Plug-in window" srcset=""> in the SCP toolbar. Select bandset in the pop-up window and load raster data in multiple band list drop-down selection.
            On the left side of dock panel, there are three tabs - home, training input, and classification. Go to tab <strong>Training input</strong> then select the button <strong> create a new training set</strong>
            <img src="newset.PNG" alt="create new sets button" >, naming your training set file and save.
            <br>
            <img src="scp_dock_ts.png" class='mt-2'alt="SCP Dock" style='max-width:30%; height:auto;'>
            <br><small class="text-secondary">Fig 4. Gnerate Training sets</small>
            <div class="mb-2"></div>
        </li>
           <li><h6>Create Region of interest</h6>
            <p> We are going to create Regions of Interest (ROIs). In SCP, each ROI is registered with a CID (Class ID),then several CIDs can catogorize into a land cover class through a MID (Macroclass), namely MID is the land cover.
                A good training dataset have the representive signature which can identify types of land cover. Normally, a land cover has a certain variety in their spectrum value due to the slight different in texture or angle. For example, both banana tree and bush can be classified into vegetation, but they have slightly different spectral characteristics.
                Therefore, we need to collect several ROIs to achieve a better classification result. The table below is our designed classification:
                <div class="row">
                    <div class="col-md-8">
                        <table class="table table-striped">
                            <thead>
                              <tr>
                                <th scope="col">Macroclass name</th>
                                <th scope="col">MID</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>Vegetation</td>
                                <td>1</td>
                              </tr>
                              <tr>
                                <td>Build-up</td>
                                <td>2</td>
                              </tr>
                              <tr>
                                <td>Open Land</td>
                                <td>3</td>
                              </tr>
                            </tbody>
                          </table>
                    </div>
                </div>
            </p>
            <p class="mt-2">
                Left click on the ROI button on the SCP toolbar, then draw on map with left clicks, then use right click to finish the sketching. You will see a polygon which is a temporary file. To save file, type the land cover classification name, and other id information in the bottom section.
                <img class="mt-3" src="classify_1.PNG" alt="Classification Information" style='max-width:30%; height:auto;'>
                <br><small class="text-secondary"> Fig 5. ROI information</small>
                <br>
                Finally, click <strong>'save temporary ROI into training input'</strong> <img src="classify_2.PNG" alt="Save into training input">. Repeat the work until your collect enough training sets. There is no standard for how many training sets should be collected, however, you should ensure your training dataset are evenly extracted from the study area.
                <img class="mt-3" src="classify_3.PNG" style='max-width:50%; height:auto;'>
                <br><small class="text-secondary">Fig 6. Training sets</small>
            </p>
            <div class="mb-2"></div>
           </li>
           <li><h6>Create the Class Output</h6>
            <p>
                Before running a classiﬁcation (or a preview), set the color of land cover classes that will be displayed in the classiﬁcation raster. 
                Go to the macroclass list and double click on the color in SCP dock and select a suitable color. 
                <br><img class="mt-3"src="color.png" alt="Color setting"  style='max-width:50%; height:auto;'>
                <br><small class="text-secondary">Fig 7. Change Color of Classification</small>
            </p>
            <p>
                Then go to the tab classification, and select algorithm for classification, in our case, we choose <strong>Maximum Likelihood</strong>  in algorithm dropdown. If you want to preview the result, go to the scp toolbar, and select preview
                <img src="preview.PNG" alt="preview">.
            </p>
            <p>
                In this stage, you can modify your training dataset by deleting or adding polygons, the result won't generate a file.
                Now let's generate the result by clicking <strong>run</strong> in the classification tab. Then you will get your result!
                <br><img class="mt-3" src="Result1.PNG" alt="" srcset="">
                <br><small class="text-secondary">Fig 8. Result</small>
                   
            <div class="mb-2"></div>
           </li>
       </ol>
    
        </div>
    </section>
    
    <div class="container">
        <h6 class="mt-5">Reference</h6>
        <ul>
            <li><small>Alfred Stein, Valentyn Tolpekin. THE CORE OF GISCIENCE:A SYSTEMS-BASED APPROACH,International Institute for Geo-Information Science and Earth Observations (ITC), 2012 - 524</small></small></li>
            <li><small>Asid Ur Rehman,2017. Comparison of High Resolution Satellite Image Classiﬁcation Techniques for
                Urban Applications</small> </li>
            <li><small>https://docs.sigro.org/qgis-basic-training/en/classification.html#image-classification</small></li>
                
        </ul>
    </div>
</body>
</html>
